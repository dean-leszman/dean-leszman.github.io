<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shit Games Pass &trade;</title>

    <link rel="stylesheet" type="text/css" media="screen" href="./styles/main.css" />
    <link rel="stylesheet" type="text/css" href="./styles/games.css" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kode+Mono:wght@400..700&display=swap" rel="stylesheet">

    <!-- FontAwesome -->
    <link href="./styles/fontawesome/fontawesome.min.css" rel="stylesheet" />
    <link href="./styles/fontawesome/brands.min.css" rel="stylesheet" />
    <link href="./styles/fontawesome/solid.min.css" rel="stylesheet" />

    <script type="text/javascript">
        const data = [{
            name: "Call of Duty: Black Ops III",
            rating: 7,
            tags: [
                "Online Co-Op",
                "Single Player",
                "Workshop",
                "Zombies"
            ]
        }, {
            name: "Battlebit Remastered",
            rating: 7,
            tags: [
                "Multiplayer", 
                "1st-Person Shooter"
            ]
        }, {
            name: "Dota 2",
            rating: 7,
            tags: [
                "Free to Play",
                "Multiplayer", 
                "MOBA",
                "Ranked",
                "Workshop"
            ]
        }, {
            name: "Journey to the Savage Planet",
            rating: 6,
            tags: [
                "Online Co-Op", 
                "Single Player",
                "Metroidvania", 
                "Platformer"
            ]
        }, {
            name: "Ghost Recon Wildlands",
            rating: 5,
            tags: [
                "Online Co-Op", 
                "Single Player",
                "1st-Person Shooter", 
                "Open World"
            ]
        }, {
            name: "Ghost Recon Breakpoint",
            rating: 4,
            tags: [
                "Online Co-Op", 
                "Single Player",
                "1st-Person Shooter", 
                "Open World"
            ]
        }, {
            name: "Trailmakers",
            rating: 7,
            tags: [
                "Online Co-Op", 
                "Single Player",
                "Construction", 
                "Physics",
                "Sandbox",
                "Workshop"
            ]
        }, {
            name: "Cave Crawlers",
            rating: 5,
            tags: [
                "Online Co-Op",
                "Free to Play",
                "Single Player",
                "Casual", 
                "Combat"
            ]
        }, {
            name: "Phasmophobia",
            rating: 8,
            tags: [
                "Online Co-Op", 
                "Single Player",
                "Horror", 
                "Puzzle"
            ]
        }, {
            name: "Chained Together",
            rating: 4,
            tags: [
                "Online Co-Op",
                "Hate Your Friends",
                "Platformer"
            ]
        }, {
            name: "Barony",
            rating: 6,
            tags: [
                "Online Co-Op", 
                "Combat",
                "Dungeon Crawler",
            ]
        }, {
            name: "Melvor Idle",
            rating: 6,
            tags: [
                "Single Player", 
                "Idle",
                "Workshop"
            ]
        }, {
            name: "Islands of Insight",
            rating: 6,
            tags: [
                "Single Player",
                "Platformer",
                "Puzzle"
            ]
        }, {
            name: "Tabletop Simulator",
            rating: 8,
            tags: [
                "Multiplayer",
                "Board Game",
                "Workshop"
            ]
        }, {
            name: "Eco",
            rating: 7,
            tags: [
                "Online Co-Op",
                "Sandbox",
                "Simulation",
                "Survival"
            ]
        }, {
            name: "The Farmer Was Replaced",
            rating: 5,
            tags: [
                "Single Player",
                "Programming"
            ]
        }, {
            name: "Escape Simulator",
            rating: 8,
            tags: [
                "Recommended",
                "Online Co-Op",
                "Single Player",
                "Puzzle",
                "Workshop"
            ]
        }, {
            name: "PlateUp!",
            rating: 8,
            tags: [
                "Recommended",
                "Online Co-Op",
                "Single Player",
                "Hate Your Friends",
                "Rogue-like",
                "Workshop"
            ]
        }, {
            name: "Counter-Strike 2",
            rating: 7,
            tags: [
                "Free to Play",
                "Multiplayer",
                "1st-Person Shooter",
                "Ranked"
            ]
        }, {
            name: "Overwatch 2",
            rating: 5,
            tags: [
                "Free to Play",
                "Multiplayer",
                "1st-Person Shooter",
                "Hero Shooter",
                "Ranked"
            ]
        }, {
            name: "Kebab Chefs! - Restaurant Simulator",
            rating: 6,
            tags: [
                "Online Co-Op",
                "Cooking",
                "Management",
                "Simulation"
            ]
        }, {
            name: "V Rising",
            rating: 7,
            tags: [
                "Online Co-Op",
                "Combat",
                "Open World",
                "Survival"
            ]
        }, {
            name: "Path of Exile",
            rating: 9,
            tags: [
                "Recommended",
                "Online Co-Op",
                "Free to Play",
                "Action RPG",
                "Combat",
                "Complex"
            ]
        }, {
            name: "Far Cry 5",
            rating: 3,
            tags: [
                "Online Co-Op",
                "1st-Person Shooter",
                "Open World"
            ]
        }, {
            name: "Mini Airways",
            rating: 6,
            tags: [
                "Single Player",
                "Management",
                "Puzzle",
                "Workshop"
            ]
        }, {
            name: "Shapez 2",
            rating: 7,
            tags: [
                "Single Player",
                "Automation",
                "Factory",
                "Management"
            ]
        }, {
            name: "Deadlock",
            rating: 8,
            tags: [
                "Multiplayer",
                "1st-Person Shooter",
                "MOBA",
                "Ranked"
            ]
        }, {
            name: "Marvel's Guardians of the Galaxy",
            rating: 6,
            tags: [
                "Single Player",
                "Action",
                "Story"
            ]
        }, {
            name: "Infraspace",
            rating: 4,
            tags: [
                "Single Player",
                "Automation",
                "City Builder",
                "Workshop"
            ]
        }, {
            name: "Blacktail",
            rating: 5,
            tags: [
                "Single Player",
                "Combat",
                "Metroidvania",
                "Story"
            ]
        }, {
            name: "Vertigo 2",
            rating: 8,
            tags: [
                "VR",
                "Single Player",
                "1st-Person Shooter"
            ]
        }, {
            name: "Beat Saber",
            rating: 8,
            tags: [
                "VR",
                "Single Player",
                "Multiplayer",
                "Rhythm"
            ]
        }, {
            name: "Remnant 2",
            rating: 6,
            tags: [
                "Online Co-Op",
                "3rd-Person Shooter",
                "Open World",
                "Souls-like"
            ]
        }, {
            name: "Jusant",
            rating: 6,
            tags: [
                "Single Player",
                "Parkour",
                "Platformer",
                "Story"
            ]
        }, {
            name: "Dome Keeper",
            rating: 7,
            tags: [
                "Single Player",
                "Rogue-like",
                "Tower Defence",
                "Workshop"
            ]
        }, {
            name: "Station to Station",
            rating: 6,
            tags: [
                "Single Player",
                "Casual",
                "Puzzle"
            ]
        }, {
            name: "Remnant Records",
            rating: 5,
            tags: [
                "Online Co-Op",
                "Horror",
                "Investigation",
                "Puzzle"
            ]
        }, {
            name: "McPixel 3",
            rating: 4,
            tags: [
                "Single Player",
                "Casual",
                "Point and Click",
                "Puzzle"
            ]
        }, {
            name: "Nodebuster",
            rating: 6,
            tags: [
                "Single Player",
                "Casual",
                "Idle"
            ]
        }, {
            name: "The Planet Crafter",
            rating: 7,
            tags: [
                "Online Co-Op",
                "Casual",
                "Open World",
                "Survival"
            ]
        }, {
            name: "Factorio",
            rating: 9,
            tags: [
                "Online Co-Op",
                "Automation",
                "Complex",
                "Factory"
            ]
        }, {
            name: "Satisfactory",
            rating: 8,
            tags: [
                "Online Co-Op",
                "Automation",
                "Complex",
                "Factory",
                "Open World"
            ]
        }, {
            name: "Signalis",
            rating: 7,
            tags: [
                "Single Player",
                "Atmospheric",
                "Horror",
                "Story"
            ]
        }];

        function showGames(selectedTag) {
            const main = document.getElementById("games");

            const gamesContainer = document.createElement("div");
            
            // Use all game data
            let games = data;

            // Filter by selected tag
            if (selectedTag) {
                games = games.filter(x => x.tags.includes(selectedTag));
            }

            // Sort games by rating then name
            games = games.sort((a, b) => a.rating < b.rating ? 1 : b.rating < a.rating ? -1 : a.name > b.name ? 1 : b.name > a.name ? -1 : 0 );

            // Add each game to the page
            games.forEach(game => {
                // Create HTML structure for each game
                const container = document.createElement("div");
                container.className = "Game";

                const header = document.createElement("header");
                header.className = "Game__header";
                
                const name = document.createElement("span");
                name.className = "Game__name";
                name.innerText = game.name;
                header.appendChild(name);

                const rating = document.createElement("span");
                rating.className = "Game__rating";
                rating.innerText = game.rating;
                header.appendChild(rating);

                container.appendChild(header);

                const tags = document.createElement("ul");
                tags.className = "Game__tags";

                game.tags.forEach(tag => {
                    const element = document.createElement("li");
                    element.innerText = tag;

                    // Set CSS styles
                    switch (tag) {
                        case "Free to Play":
                            element.className = "Tag--free";
                            break;
                        case "Online Co-Op":
                            element.className = "Tag--coop";
                            break;
                        case "Recommended":
                            element.className = "Tag--recommended";
                            break;
                        case "VR":
                            element.className = "Tag--vr";
                            break;
                        default:
                    }
                    
                    tags.appendChild(element);
                });

                container.appendChild(tags);
                gamesContainer.appendChild(container);
            })

            main.replaceChildren(gamesContainer);
        };

        // Handle select onchange event
        function handleSelectChange(event) {
            const selectElement = document.getElementById("tag-select");
            const selectedTag = selectElement.value;
            showGames(selectedTag);
        }

        // Set <option> elements for Tag select
        function setupSelect() {
            const selectElement = document.getElementById("tag-select");

            let tags = [];

            // Get all unique tags
            data.forEach(game => {
                game.tags.filter(tag => !tags.includes(tag)).forEach(tag => tags.push(tag));
            });

            tags = tags.sort();

            // Add <option> element for each tag
            tags.forEach(tag => {
                const optionElement = document.createElement("option");
                optionElement.value = tag;
                optionElement.innerText = tag;
                selectElement.appendChild(optionElement);
            });
        }

        function init() {
            setupSelect();
            showGames();
        }
    </script>
</head>
<body onload="init()">
    <header class="page-header">
        <h1>Shit Games Pass &trade;</h1>
        <div class="select-container">
            <select id="tag-select" placeholder="Select a tag" onchange="handleSelectChange()">
                <option value="" selected>All Games</option>
            </select>
        </div>
    </header>
    <main id="games">
        <!-- 
        <div class="Game hide">
            <header class="Game__header">
                <span class="Game__name">GAME NAME</span>
                <div class="Game__rating">GAME RATING</div>
            </header>
            
            <ul class="Game__tags">
                <li>GAME TAG 1</li>
                <li>GAME TAG 2</li>
            </ul>
        </div> 
        -->
    </main>
</body>
</html>
